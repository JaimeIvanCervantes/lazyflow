<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Classifiers &mdash; lazyflow 0.1 documentation</title>
    
    <link rel="stylesheet" href="static/default.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="lazyflow 0.1 documentation" href="index.html" />
    <link rel="next" title="Maintaining this Documentation" href="documentation_maintenance.html" />
    <link rel="prev" title="Utilities" href="utilities.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="documentation_maintenance.html" title="Maintaining this Documentation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="utilities.html" title="Utilities"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">lazyflow 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="classifiers">
<span id="lazyflow-classifiers"></span><h1>Classifiers<a class="headerlink" href="#classifiers" title="Permalink to this headline">¶</a></h1>
<p>Lazyflow includes some predefined operators for training a classifier and predicting results with it.
These operators are defined in <tt class="docutils literal"><span class="pre">lazyflow.operators.classifierOperators.py</span></tt>.
Most applications should use the high-level operators <tt class="docutils literal"><span class="pre">OpTrainClassifierBlocked</span></tt> and <tt class="docutils literal"><span class="pre">OpClassifierPredict</span></tt>,
which instantiate internal pipelines for retrieving blocks of image data, caching it, and using it with the classifier.</p>
<p>The lazyflow classifiers operators support two families of classifiers:</p>
<p>1. Most classifiers are so-called &#8220;vectorwise&#8221; classifiers, which can be trained with a simple feature matrix.
When training these classifiers, the features for each label can be extracted from the input images and cached in a small feature matrix.</p>
<p>2. But some classifiers require the training data in its full 2D or 3D context, in which case it is trained with full 2D/3D feature images.
In lazyflow, these are called &#8220;pixelwise&#8221; classifiers.</p>
<p>The classifier operators are made to be agnostic with respect to the particular type of classifier you want to use (e.g. RandomForest, SVM, etc.)
Any type of classifier can be used as long as it is made to adhere to two special abstract interfaces: a
&#8216;classifier factory&#8217; interface and a &#8216;classifier&#8217; interface.</p>
<p>To add support for a new classifier in lazyflow, you must define two classes:</p>
<ol class="arabic simple">
<li>A &#8220;classifier factory&#8221;, which inherits from either <tt class="docutils literal"><span class="pre">LazyflowVectorwiseClassifierFactoryABC</span></tt> or <tt class="docutils literal"><span class="pre">LazyflowPixelwiseClassifierFactoryABC</span></tt></li>
<li>A &#8220;classifier&#8221; which inherits from either <tt class="docutils literal"><span class="pre">LazyflowVectorwiseClassifierABC</span></tt> or <cite>LazyflowPixelwiseClassifierABC`</cite></li>
</ol>
<p>The factory is used to create and train a classifier.  The factory must be pickle-able and the classifier must be serializable in hdf5.</p>
<p>For clear example implementations of vectorwise and pixelwise classifiers, see <a class="reference external" href="https://github.com/ilastik/lazyflow/blob/master/lazyflow/classifiers/vigraRfLazyflowClassifier.py">vigraRfLazyflowClassifier.py</a> and <a class="reference external" href="https://github.com/ilastik/lazyflow/blob/master/lazyflow/classifiers/vigraRfPixelwiseClassifier.py">vigraRfPixelwiseClassifier.py</a>.
A slightly more complicated &#8220;production&#8221; classifier can be found in <a class="reference external" href="https://github.com/ilastik/lazyflow/blob/master/lazyflow/classifiers/parallelVigraRfLazyflowClassifier.py">parallelVigraRfLazyflowClassifier.py</a>.</p>
<p>Finally, most classifiers used in <tt class="docutils literal"><span class="pre">sklearn</span></tt> can be used in lazyflow via the classes implemented in <a class="reference external" href="https://github.com/ilastik/lazyflow/blob/master/lazyflow/classifiers/sklearnLazyflowClassifier.py">sklearnLazyflowClassifier.py</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In the ilastik pixel classification workflow, the classifier type can be changed via the &#8220;Advanced&#8221; menu,
which is only visible in &#8220;debug&#8221; mode.</p>
</div>
<div class="section" id="reference-classifier-abcs">
<h2>Reference: Classifier ABCs<a class="headerlink" href="#reference-classifier-abcs" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="lazyflow.classifiers.LazyflowVectorwiseClassifierFactoryABC">
<em class="property">class </em><tt class="descclassname">lazyflow.classifiers.</tt><tt class="descname">LazyflowVectorwiseClassifierFactoryABC</tt><a class="headerlink" href="#lazyflow.classifiers.LazyflowVectorwiseClassifierFactoryABC" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines an interface for vector-wise classifier &#8216;factory&#8217; objects, 
which lazyflow classifier operators use to construct new vector-wise classifiers.
A &#8220;vector-wise&#8221; classifier is trained with a 2D feature matrix and a 1D label vector.</p>
<dl class="method">
<dt id="lazyflow.classifiers.LazyflowVectorwiseClassifierFactoryABC.create_and_train">
<tt class="descname">create_and_train</tt><big>(</big><em>X</em>, <em>y</em><big>)</big><a class="headerlink" href="#lazyflow.classifiers.LazyflowVectorwiseClassifierFactoryABC.create_and_train" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new classifier and train it with the feature matrix X and label vector y.</p>
</dd></dl>

<dl class="attribute">
<dt id="lazyflow.classifiers.LazyflowVectorwiseClassifierFactoryABC.description">
<tt class="descname">description</tt><a class="headerlink" href="#lazyflow.classifiers.LazyflowVectorwiseClassifierFactoryABC.description" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a human-readable description of this classifier.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="lazyflow.classifiers.LazyflowVectorwiseClassifierABC">
<em class="property">class </em><tt class="descclassname">lazyflow.classifiers.</tt><tt class="descname">LazyflowVectorwiseClassifierABC</tt><a class="headerlink" href="#lazyflow.classifiers.LazyflowVectorwiseClassifierABC" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines an interface for &#8220;vector-wise&#8221; classifier objects that can be used by the lazyflow classifier operators.
A &#8220;vector-wise&#8221; classifier is trained with a 2D feature matrix and a 1D label vector.</p>
<p>All scikit-learn classifiers already satisfy this interface.</p>
<dl class="classmethod">
<dt id="lazyflow.classifiers.LazyflowVectorwiseClassifierABC.deserialize_hdf5">
<em class="property">classmethod </em><tt class="descname">deserialize_hdf5</tt><big>(</big><em>h5py_group</em><big>)</big><a class="headerlink" href="#lazyflow.classifiers.LazyflowVectorwiseClassifierABC.deserialize_hdf5" title="Permalink to this definition">¶</a></dt>
<dd><p>Class method.  Deserialize the classifier stored in the given <tt class="docutils literal"><span class="pre">h5py.Group</span></tt> object, and return it.</p>
</dd></dl>

<dl class="attribute">
<dt id="lazyflow.classifiers.LazyflowVectorwiseClassifierABC.feature_count">
<tt class="descname">feature_count</tt><a class="headerlink" href="#lazyflow.classifiers.LazyflowVectorwiseClassifierABC.feature_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of features used to train this classifier.</p>
</dd></dl>

<dl class="attribute">
<dt id="lazyflow.classifiers.LazyflowVectorwiseClassifierABC.known_classes">
<tt class="descname">known_classes</tt><a class="headerlink" href="#lazyflow.classifiers.LazyflowVectorwiseClassifierABC.known_classes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the list of label classes known to this classifier (i.e. the classes it was trained with).</p>
</dd></dl>

<dl class="method">
<dt id="lazyflow.classifiers.LazyflowVectorwiseClassifierABC.predict_probabilities">
<tt class="descname">predict_probabilities</tt><big>(</big><em>X</em><big>)</big><a class="headerlink" href="#lazyflow.classifiers.LazyflowVectorwiseClassifierABC.predict_probabilities" title="Permalink to this definition">¶</a></dt>
<dd><p>For each sample in the feature matrix <tt class="docutils literal"><span class="pre">X</span></tt>, predict the probabilities that the
sample belongs to each label class the classifier was trained with.</p>
<p>Returns: A multi-channel vector (each channel corresponds to a different label class).</p>
</dd></dl>

<dl class="method">
<dt id="lazyflow.classifiers.LazyflowVectorwiseClassifierABC.serialize_hdf5">
<tt class="descname">serialize_hdf5</tt><big>(</big><em>h5py_group</em><big>)</big><a class="headerlink" href="#lazyflow.classifiers.LazyflowVectorwiseClassifierABC.serialize_hdf5" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialize the classifier as an hdf5 group.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="lazyflow.classifiers.LazyflowPixelwiseClassifierFactoryABC">
<em class="property">class </em><tt class="descclassname">lazyflow.classifiers.</tt><tt class="descname">LazyflowPixelwiseClassifierFactoryABC</tt><a class="headerlink" href="#lazyflow.classifiers.LazyflowPixelwiseClassifierFactoryABC" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines an interface for pixel-wise classifier &#8216;factory&#8217; objects, 
which lazyflow classifier operators use to construct new pixel-wise classifiers.
A &#8220;pixel-wise&#8221; classifier is trained with a list of ND feature images (with M feature channels),
and a list of corresponding ND label images, with 1 channel each.</p>
<p>Note: It is assumed here that &#8216;channel&#8217; is always the last axis of the image.</p>
<dl class="method">
<dt id="lazyflow.classifiers.LazyflowPixelwiseClassifierFactoryABC.create_and_train_pixelwise">
<tt class="descname">create_and_train_pixelwise</tt><big>(</big><em>featureimages</em>, <em>labelimages</em><big>)</big><a class="headerlink" href="#lazyflow.classifiers.LazyflowPixelwiseClassifierFactoryABC.create_and_train_pixelwise" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new classifier and train it with the given list of feature images and the given list of label images.
Generally, it is assumed that the channel dimension is the LAST axis for each image.  
(The label image must include a singleton channel dimension.)
Each pair of corresponding feature and label images must have matching shapes (except for the channel dimension).</p>
</dd></dl>

<dl class="attribute">
<dt id="lazyflow.classifiers.LazyflowPixelwiseClassifierFactoryABC.description">
<tt class="descname">description</tt><a class="headerlink" href="#lazyflow.classifiers.LazyflowPixelwiseClassifierFactoryABC.description" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a human-readable description of this classifier.</p>
</dd></dl>

<dl class="method">
<dt id="lazyflow.classifiers.LazyflowPixelwiseClassifierFactoryABC.get_halo_shape">
<tt class="descname">get_halo_shape</tt><big>(</big><em>data_axes='zyxc'</em><big>)</big><a class="headerlink" href="#lazyflow.classifiers.LazyflowPixelwiseClassifierFactoryABC.get_halo_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the halo dimensions required for optimal classifier performance.
For example, for a classifier that performs an internal 3D convolution with sigma=1.5 and window_size = 2.0,
halo_shape = (3, 3, 3, 0).</p>
<p>Clients are not required to provide the halo during training.  
(For example, it may not be possible for labels near the image border.)</p>
<dl class="docutils">
<dt>data_axes: A string representing the axis order of the data that will be used for training/prediction.</dt>
<dd>Examples: &#8216;yxc&#8217;, &#8216;zyxc&#8217;, or &#8216;tzyxc&#8217;.</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="lazyflow.classifiers.LazyflowPixelwiseClassifierABC">
<em class="property">class </em><tt class="descclassname">lazyflow.classifiers.</tt><tt class="descname">LazyflowPixelwiseClassifierABC</tt><a class="headerlink" href="#lazyflow.classifiers.LazyflowPixelwiseClassifierABC" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines an interface for &#8220;pixel-wise&#8221; classifier objects that can be used by the lazyflow classifier operators.
A &#8220;pixel-wise&#8221; classifier expects its input be given as a list of ND feature images (with M feature channels).
(It was trained with a list of ND label images, with 1 channel each.)</p>
<p>Note: It is assumed here that &#8216;channel&#8217; is always the last axis of the image.</p>
<p>(This interface is typically used with classifiers that must generate their own features internally,
and thus require the knowledge of the image structure and context around each training/prediction point.)</p>
<dl class="classmethod">
<dt id="lazyflow.classifiers.LazyflowPixelwiseClassifierABC.deserialize_hdf5">
<em class="property">classmethod </em><tt class="descname">deserialize_hdf5</tt><big>(</big><em>h5py_group</em><big>)</big><a class="headerlink" href="#lazyflow.classifiers.LazyflowPixelwiseClassifierABC.deserialize_hdf5" title="Permalink to this definition">¶</a></dt>
<dd><p>Class method.  Deserialize the classifier stored in the given <tt class="docutils literal"><span class="pre">h5py.Group</span></tt> object, and return it.</p>
</dd></dl>

<dl class="attribute">
<dt id="lazyflow.classifiers.LazyflowPixelwiseClassifierABC.feature_count">
<tt class="descname">feature_count</tt><a class="headerlink" href="#lazyflow.classifiers.LazyflowPixelwiseClassifierABC.feature_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of features used to train this classifier.</p>
</dd></dl>

<dl class="method">
<dt id="lazyflow.classifiers.LazyflowPixelwiseClassifierABC.get_halo_shape">
<tt class="descname">get_halo_shape</tt><big>(</big><em>data_axes='zyxc'</em><big>)</big><a class="headerlink" href="#lazyflow.classifiers.LazyflowPixelwiseClassifierABC.get_halo_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as LazyflowPixelwiseClassifierFactoryABC.get_halo_shape().  See that function for details.</p>
</dd></dl>

<dl class="attribute">
<dt id="lazyflow.classifiers.LazyflowPixelwiseClassifierABC.known_classes">
<tt class="descname">known_classes</tt><a class="headerlink" href="#lazyflow.classifiers.LazyflowPixelwiseClassifierABC.known_classes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the list of label classes known to this classifier (i.e. the classes it was trained with).</p>
</dd></dl>

<dl class="method">
<dt id="lazyflow.classifiers.LazyflowPixelwiseClassifierABC.predict_probabilities_pixelwise">
<tt class="descname">predict_probabilities_pixelwise</tt><big>(</big><em>feature_image</em><big>)</big><a class="headerlink" href="#lazyflow.classifiers.LazyflowPixelwiseClassifierABC.predict_probabilities_pixelwise" title="Permalink to this definition">¶</a></dt>
<dd><p>For each pixel in the given feature image, predict the probabilities that the
pixel belongs to each label class the classifier was trained with.</p>
<p>Returns: A multi-channel image (each channel corresponds to a different label class).</p>
</dd></dl>

<dl class="method">
<dt id="lazyflow.classifiers.LazyflowPixelwiseClassifierABC.serialize_hdf5">
<tt class="descname">serialize_hdf5</tt><big>(</big><em>h5py_group</em><big>)</big><a class="headerlink" href="#lazyflow.classifiers.LazyflowPixelwiseClassifierABC.serialize_hdf5" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialize the classifier as an hdf5 group</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Classifiers</a><ul>
<li><a class="reference internal" href="#reference-classifier-abcs">Reference: Classifier ABCs</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="utilities.html"
                        title="previous chapter">Utilities</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="documentation_maintenance.html"
                        title="next chapter">Maintaining this Documentation</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="sources/classifiers.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="documentation_maintenance.html" title="Maintaining this Documentation"
             >next</a> |</li>
        <li class="right" >
          <a href="utilities.html" title="Utilities"
             >previous</a> |</li>
        <li><a href="index.html">lazyflow 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Christoph Straehle, Bernhard X. Kausler, Thorben Kröger, Ullrich Köthe , Fred A. Hamprecht, Anna Kreshuk, Luca Fiaschi, Stuart Berg.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.1.
    </div>
  </body>
</html>
